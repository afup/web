name: CI

on: [push, pull_request]

jobs:

  unit:
    name: "Unit tests"
    runs-on: ubuntu-18.04
 
    strategy:
      fail-fast: false
      matrix:
        php: ["5.6", "7.0"]
 
    steps:
      - uses: actions/checkout@v2
      - name: Tests - Unit
        run: PHP_VERSION=${{ matrix.php }} make unit-tests

  lint:
    name: "Linter"
    runs-on: ubuntu-18.04

    strategy:
      fail-fast: false
      matrix:
        php: ["5.6", "7.0"]

    steps:
      - uses: actions/checkout@v2
      - name: Tests - CS Fixer
        run: PHP_VERSION=${{ matrix.php }} make code-style-check

  functional:
    name: "Functional tests"
    runs-on: ubuntu-18.04

    strategy:
      fail-fast: false
      matrix:
        php: ["5.6", "7.0"]

    steps:
      - uses: actions/checkout@v2
      - name: Tests - Functional
        run: PHP_VERSION=${{ matrix.php }} make func-tests
