{% extends 'admin/base_with_header.html.twig' %}

{% form_theme form 'form_theme_admin.html.twig' %}

{% block content %}
    <h2>Modifier une personne morale</h2>

    <div class="ui menu">
        <a href="/pages/administration/index.php?page=cotisations&amp;type_personne={{ constant('AFUP_PERSONNES_MORALES') }}&amp;id_personne={{ company.id }}"
           class="item">
            <i class="money bill icon"></i>
            Voir les cotisations
        </a>
    </div>

    <div class="ui segment">
        {{ form_start(form) }}
        <h2 class="ui header">Informations</h2>
        <div class="ui clearing divider"></div>
        <div>
            <div class="ui form">
                {{ form_row(form.companyName) }}
                {{ form_row(form.siret) }}
                {{ form_row(form.address) }}
                {{ form_row(form.zipcode) }}
                {{ form_row(form.city) }}
                {{ form_row(form.countryId) }}
            </div>
        </div>
    </div>

    <div class="ui segment">
        <h2 class="ui header">Contact administratif</h2>
        <div class="ui clearing divider"></div>
        <div>
            <div class="ui form">
                {{ form_row(form.lastname, {attr: {'data-role': 'field-lastname'}}) }}
                {{ form_row(form.firstname, {attr: {'data-role': 'field-firstname'}}) }}
                {{ form_row(form.email) }}
                {{ form_row(form.phone) }}
                {{ form_row(form.cellphone) }}
            </div>
        </div>
    </div>

    <div class="ui segment">
        <h2 class="ui header">Paramètres</h2>
        <div class="ui clearing divider"></div>
        <div>
            <div class="ui form">
                {{ form_row(form.status) }}
                {{ form_row(form.maxMembers) }}
                <div class="inline fields ui grid">
                    <div class="three wide column"></div>
                    <div class="field nine wide column">
                        Nombre de membres rattachés autorisé par la cotisation
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="ui segment">
        <div>
            <div class="ui form">
                <div class="inline fields ui grid">
                    <div class="three wide column"></div>
                    <div class="field nine wide column">
                        {{ form_row(form.save, {label: 'Modifier', attr: {class: "ui primary button"}}) }}
                    </div>
                </div>
            </div>
            {{ form_end(form) }}
        </div>
    </div>

    <div class="ui segment">
        <h2 class="ui header">Personnes physiques associées</h2>
        <div class="ui clearing divider"></div>
        <div class="ui list">
            {# @var user \AppBundle\Association\Model\User #}
            {% for user in users %}
                <div class="item">
                    <i class="user icon"></i>
                    <div class="content">
                        {% if user.status == constant('AppBundle\\Association\\Model\\User::STATUS_ACTIVE') %}
                            <span class="ui mini green label">Actif</span>
                        {% else %}
                            <span class="ui mini red label">Inactif</span>
                        {% endif %}
                        <a href="{{ path('admin_members_user_edit', {id: user.id}) }}">
                            {{ user.lastName }} {{ user.firstName }}
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
