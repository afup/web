{% form_theme form 'form_theme_admin.html.twig' %}

{{ form_start(form) }}
<div class="ui segment">
    <h2 class="ui header">Détail devis</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            {{ form_row(form.quotationDate) }}
        </div>
    </div>
</div>

<div class="ui segment">
    <h2 class="ui header">Facturation</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            <div class="inline fields ui grid">
                <div class="three wide column">
                </div>
                <div class="field seven wide column">
                    Ces informations concernent la personne ou la société qui sera facturée<br><br>
                </div>
            </div>
            {{ form_row(form.company) }}
            {{ form_row(form.service) }}
            {{ form_row(form.address) }}
            {{ form_row(form.zipcode) }}
            {{ form_row(form.city) }}
            {{ form_row(form.countryId) }}
        </div>
    </div>
</div>

<div class="ui segment">
    <h2 class="ui header">Contact</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            {{ form_row(form.lastname) }}
            {{ form_row(form.firstname) }}
            {{ form_row(form.phone) }}
            {{ form_row(form.email) }}
            {{ form_row(form.tvaIntra) }}
        </div>
    </div>
</div>

<div class="ui segment">
    <h2 class="ui header">Réservé à l'administration</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            <div class="inline fields ui grid">
                <div class="three wide column">
                </div>
                <div class="field seven wide column">
                    Numéro généré automatiquement et affiché en automatique <br><br>
                </div>
            </div>
            {% if form.vars.actionType == 'edit' %}
            {{ form_row(form.quotationNumber) }}
            {% endif %}
        </div>
    </div>
</div>

<div class="ui segment">
    <h2 class="ui header">Référence client</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            <div class="inline fields ui grid">
                <div class="three wide column">
                </div>
                <div class="field seven wide column">
                    Possible d'avoir plusieurs références à mettre (obligation client)<br><br>
                </div>
            </div>
            {{ form_row(form.refClt1) }}
            {{ form_row(form.refClt2) }}
            {{ form_row(form.refClt3) }}
        </div>
    </div>
</div>

<div class="ui segment">
    <h2 class="ui header">Observation</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            <div class="inline fields ui grid">
                <div class="three wide column">
                </div>
                <div class="field seven wide column">
                    Ces informations seront écrites à la fin du document<br><br>
                </div>
            </div>
            {{ form_row(form.observation) }}
        </div>
    </div>
</div>

<div class="ui segment">
    <h2 class="ui header">Devise</h2>
    <div class="ui clearing divider"></div>
    <div>
        <div class="ui form">
            {{ form_row(form.currency) }}
        </div>
    </div>
</div>

<div class="ui segment">
    <div class="inline grid ui">
        <div class="column twelve wide">
            <h2 class="ui header" >Contenu</h2>
        </div>
    </div>
    {% set index = form.details|length > 0 ? (form.details|length) : 0 %}
    <div class="ui form invoice_row_container" data-index="{{ index }}"
         data-prototype="{{ include('admin/accounting/quotation/_prototype.html.twig', {'form': form, 'index': index })|e('html_attr') }}">
        {% for detail in form.details %}
        <div id="invoice_row_{{ loop.index }}">
            <div class="ui clearing divider"></div>
            <div class="inline fields ui grid">
                <div class="three wide column"></div>
                <div class="field nine wide column">Ligne {{ loop.index }}</div>
                <div class="four wide column action_container"></div>
            </div>
            {{ form_row(detail.reference) }}
            <div class="inline fields ui grid">
                <div class="three wide column"></div>
                <div class="field seven wide column">Rappel : sponsoring 20%, place supplémentaire 10%.</div>
            </div>
            {{ form_row(detail.tva) }}
            {{ form_row(detail.designation) }}
            {{ form_row(detail.quantity) }}
            {{ form_row(detail.unitPrice) }}
        </div>
        {% endfor %}
    </div>
    <div class="inline grid ui">
        <div class="column twelve wide"></div>
        <div class="column four wide">
            <a href="javascript:void(0);" class="ui primary button add_item_link" data-collection-holder-class="invoice_row_container">Ajouter une ligne</a>
        </div>
    </div>
</div>

<div class="ui segment">
    <div>
        <div class="ui form">
            <div class="inline fields ui grid">
                <div class="three wide column">
                    <input type="submit" value="{{ submitLabel }}" class="ui primary button">
                </div>
            </div>
        </div>
    </div>
</div>
<div class="ui segment">
    <p>
        <span class="obligatoire">*</span> indique un champ obligatoire
    </p>
</div>

{{ form_end(form) }}

