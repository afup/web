{% extends 'admin/base_with_header.html.twig' %}

{% block content %}
    <h2>Planning</h2>
    {% include 'admin/event/change_event.html.twig' with {form: event_select_form} only %}

    <div class="ui segment">
        <div class="ui mini horizontal statistic">
            <div class="value">
                {{ sessions|length }}
            </div>
            <div class="label">
                session(s)
            </div>
        </div>
    </div>

    {{ agenda|raw }}

    <table class="ui table striped compact celled">
        <thead>
        <tr>
            <th align="left">Titre</th>
            <th>&nbsp;</th>
        </tr>
        </thead>
        {% for session in sessions %}
        <tr class="{{ loop.index % 2 == 0 ? "odd" : "even" }}">
        <td style="white-space : normal;">
            <a href="#ag_sess_{{ session.talk.id }}">
                {{ session.talk.title }}
            </a>
            <br />

            {% for speaker in session.speakers %}
                <a href="/admin/speaker/edit?id={{ speaker.id }}" title="Modifier la fiche de {{ speaker.label }}">
                    {{ speaker.label }} - {{ speaker.company }}
                </a>
            {% endfor %}
            <br />

            {% if session.planning %}
                <em>{{ session.planning.start|date("d/m/Y") }}</em> /
                {{ session.planning.start|date("H:i") }} - {{ session.planning.end|date("H:i") }} / {{ session.room ? session.room.name }}
            {% else %}
                <em>non planifié</em>
            {% endif %}
        </td>
        <td style="text-align: right" nowrap="nowrap">
            {% set template_path="/templates/administration/images/famfamfam/" %}
            <a href="{{ path("admin_event_sessions_edit", {talkId: session.talk.id, sessionId: session.planning ? session.planning.id }) }}"
               title="Modifier la session {{ session.talk.title }}">
                <img src="{{ template_path }}application_form_edit.png" alt="Modifier" />
            </a>
            {% if session.planning %}
            <a href="{{ path("admin_event_sessions_delete", {id: session.planning.id }) }}"
               title="Supprimer la session {{ session.talk.title }}"
               onclick="return confirm('Etes-vous sûr de vouloir supprimer la session {{ session.talk.title }} ?');">
                <img src="{{ template_path }}delete.png" alt="Supprimer" />
            </a>
            {% else %}
                <img src="{{ template_path }}delete.png" alt="Supprimer" />
            {% endif %}
        </td>
        </tr>
        {% else %}
        <tr>
            <td><em>Aucune session</em></td>
        </tr>
        {% endfor %}
    </table>

{% endblock %}
